{"ast":null,"code":"var _jsxFileName = \"D:\\\\siteauth\\\\my-website \\u2014 \\u043A\\u043E\\u043F\\u0438\\u044F\\\\src\\\\components\\\\game.js\",\n  _s = $RefreshSig$();\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport GameControls from './game-controls';\nimport Map from './map';\nimport { shuffleArray } from '../logic/utils';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GameContainer = styled.div`\n  display: flex;\n  gap: 10px;\n  padding: 10px;\n  position: relative;\n  height: calc(100% - 20px);\n`;\n_c = GameContainer;\nconst CaptureModalBackdrop = styled.div`\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n`;\n_c2 = CaptureModalBackdrop;\nconst CaptureModalCard = styled.div`\n  background: #ffffff;\n  border-radius: 16px;\n  padding: 24px 24px 72px;\n  width: 95%;\n  max-width: 1100px;\n  height: 80vh;\n  box-shadow: 0 24px 80px rgba(0, 0, 0, 0.5);\n  display: flex;\n  flex-direction: column;\n  position: relative;\n`;\n_c3 = CaptureModalCard;\nconst CaptureModalImagePlaceholder = styled.div`\n  width: 100%;\n  height: 80px;\n  border-radius: 8px;\n  background: #f2f2f2;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #777;\n  font-size: 14px;\n  margin-top: 8px;\n  margin-bottom: 16px;\n`;\n_c4 = CaptureModalImagePlaceholder;\nconst CaptureModalTitle = styled.h2`\n  margin: 0 0 8px;\n  font-size: 20px;\n`;\n_c5 = CaptureModalTitle;\nconst CaptureModalText = styled.p`\n  margin: 12px 0 20px;\n  font-size: 14px;\n  color: #444;\n`;\n_c6 = CaptureModalText;\nconst CaptureModalActions = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  gap: 24px;\n  position: absolute;\n  left: 24px;\n  right: 24px;\n  bottom: 24px;\n`;\n_c7 = CaptureModalActions;\nconst CaptureButton = styled.button`\n  position: relative;\n  width: 100px;\n  height: 100px;\n  padding: 0;\n  border-radius: 12px;\n  border: none;\n  cursor: pointer;\n  transition: transform 0.05s ease-in-out, box-shadow 0.05s ease-in-out,\n    background-color 0.1s ease-in-out, filter 0.1s ease-in-out;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &::after {\n    content: attr(data-order);\n    position: absolute;\n    top: 6px;\n    right: 6px;\n    width: 20px;\n    height: 20px;\n    border-radius: 999px;\n    background: rgba(0, 0, 0, 0.15);\n    color: #111;\n    font-size: 12px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  &:active {\n    transform: translateY(1px);\n    filter: brightness(0.9);\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.35);\n  }\n\n  &.cancel {\n    background: #e5e5e5;\n    \n    &.active {\n      background: #d4d4d4;\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\n    }\n  }\n\n  &.confirm {\n    background: #16a34a;\n    \n    &.active {\n      background: #15803d;\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\n    }\n  }\n\n  &.confirm-alt {\n    background: #22c55e;\n    \n    &.active {\n      background: #16a34a;\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\n    }\n  }\n\n  &.cancel-alt {\n    background: #f97316;\n    \n    &.active {\n      background: #ea580c;\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\n    }\n  }\n\n  img {\n    width: 80%;\n    height: 80%;\n    object-fit: contain;\n  }\n`;\n_c8 = CaptureButton;\nconst CaptureModalColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n`;\n_c9 = CaptureModalColumn;\nconst ActionButton = styled.button`\n  position: absolute;\n  bottom: 20px;\n  width: 60px;\n  height: 60px;\n  border-radius: 8px;\n  border: none;\n  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ${props => props.disabled ? '#ccc' : '#16a34a'};\n  opacity: ${props => props.disabled ? 0.5 : 1};\n  transition: all 0.2s ease;\n  \n  &:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n  }\n  \n  img {\n    width: 70%;\n    height: 70%;\n    object-fit: contain;\n  }\n`;\nconst UndoButton = styled(ActionButton)`\n  left: 20px;\n`;\n_c0 = UndoButton;\nconst RedoButton = styled(ActionButton)`\n  right: 20px;\n`;\n_c1 = RedoButton;\nconst shuffleTurnsOrder = arr => arr.concat(arr.splice(0, 1));\nconst initialColors = shuffleArray(['#7975b9', '#007F73', '#FB9AD1', '#FFC470', '#C5FF95', '#4793AF', '#ff7171']);\nconst Game = ({\n  map\n}) => {\n  _s();\n  const [teams, setTeams] = React.useState([]);\n  const [gameState, setGameState] = React.useState('prepare');\n  const [turnsOrder, setTurnsOrder] = React.useState([]);\n  const [currentTurn, setCurrentTurn] = React.useState(null);\n  const [roundNumber, setRoundNumber] = React.useState(0);\n  const [activeTeam, setActiveTeam] = React.useState(null);\n  const [pendingCaptureZone, setPendingCaptureZone] = React.useState(null);\n  const [captureState, setCaptureState] = React.useState({\n    attackerAnswered: false,\n    defenderAnswered: false,\n    attackerCorrect: null,\n    defenderCorrect: null,\n    firstResponder: null,\n    isNeutral: false,\n    attackerAnswer: null,\n    defenderAnswer: null,\n    responseOrder: []\n  });\n  const [availableColors, setAvailableColors] = React.useState([...initialColors]);\n\n  // Новые состояния для undo/redo\n  const [actionHistory, setActionHistory] = React.useState([]);\n  const [futureActions, setFutureActions] = React.useState([]);\n\n  // Функция для сохранения действия в историю\n  const saveActionToHistory = React.useCallback(action => {\n    setActionHistory(prev => [...prev, {\n      ...action,\n      timestamp: Date.now()\n    }]);\n    // Очищаем будущие действия при новом действии\n    setFutureActions([]);\n  }, []);\n\n  // Функция отката действия\n  const undo = React.useCallback(() => {\n    if (actionHistory.length === 0) return;\n    const lastAction = actionHistory[actionHistory.length - 1];\n\n    // Восстанавливаем предыдущее состояние\n    switch (lastAction.type) {\n      case 'TEAM_ADDED':\n        // Удаляем последнюю команду\n        const newTeamsAfterUndo = teams.slice(0, -1);\n        setTeams(newTeamsAfterUndo);\n        setAvailableColors(prev => [...prev, lastAction.team.color]);\n        break;\n      case 'ZONE_CHANGED':\n        // Восстанавливаем предыдущее состояние команд\n        setTeams(lastAction.previousTeams);\n        break;\n      case 'TURN_COMPLETED':\n        // Восстанавливаем состояние хода\n        setCurrentTurn(lastAction.previousTurn);\n        setActiveTeam(lastAction.previousActiveTeam);\n        setRoundNumber(lastAction.previousRound);\n        setTurnsOrder(lastAction.previousTurnsOrder);\n        setTeams(lastAction.previousTeams);\n        break;\n      case 'GAME_STARTED':\n        // Возвращаем в состояние подготовки\n        setGameState('prepare');\n        setActiveTeam(lastAction.previousActiveTeam);\n        setTeams(lastAction.previousTeams);\n        setCurrentTurn(null);\n        setRoundNumber(0);\n        setTurnsOrder([]);\n        break;\n      case 'CAPTURE_RESOLVED':\n        // Восстанавливаем состояние до захвата\n        setTeams(lastAction.previousTeams);\n        setCurrentTurn(lastAction.previousTurn);\n        setActiveTeam(lastAction.previousActiveTeam);\n        setRoundNumber(lastAction.previousRound);\n        setPendingCaptureZone(null);\n        break;\n      default:\n        break;\n    }\n\n    // Перемещаем действие в будущие действия\n    setFutureActions(prev => [lastAction, ...prev]);\n    setActionHistory(prev => prev.slice(0, -1));\n  }, [actionHistory, teams]);\n\n  // Функция повтора действия\n  const redo = React.useCallback(() => {\n    if (futureActions.length === 0) return;\n    const nextAction = futureActions[0];\n\n    // Применяем действие снова\n    switch (nextAction.type) {\n      case 'TEAM_ADDED':\n        // Добавляем команду обратно\n        setTeams(prev => [...prev, nextAction.team]);\n        setAvailableColors(prev => prev.filter(color => color !== nextAction.team.color));\n        break;\n      case 'ZONE_CHANGED':\n        // Восстанавливаем следующее состояние\n        setTeams(nextAction.nextTeams);\n        break;\n      case 'TURN_COMPLETED':\n        // Восстанавливаем следующее состояние хода\n        setCurrentTurn(nextAction.nextTurn);\n        setActiveTeam(nextAction.nextActiveTeam);\n        setRoundNumber(nextAction.nextRound);\n        setTurnsOrder(nextAction.nextTurnsOrder);\n        setTeams(nextAction.nextTeams);\n        break;\n      case 'GAME_STARTED':\n        // Запускаем игру снова\n        setGameState('started');\n        setActiveTeam(nextAction.nextActiveTeam);\n        setTeams(nextAction.nextTeams);\n        setCurrentTurn(0);\n        setRoundNumber(1);\n        setTurnsOrder(nextAction.nextTurnsOrder);\n        break;\n      case 'CAPTURE_RESOLVED':\n        // Восстанавливаем состояние после захвата\n        setTeams(nextAction.nextTeams);\n        setCurrentTurn(nextAction.nextTurn);\n        setActiveTeam(nextAction.nextActiveTeam);\n        setRoundNumber(nextAction.nextRound);\n        break;\n      default:\n        break;\n    }\n\n    // Возвращаем действие в историю\n    setActionHistory(prev => [...prev, nextAction]);\n    setFutureActions(prev => prev.slice(1));\n  }, [futureActions]);\n\n  // Получаем basePositions из teams\n  const basePositions = React.useMemo(() => {\n    return teams.map(team => team.base).filter(Boolean);\n  }, [teams]);\n  const setBase = React.useCallback((zoneId, teamIndex) => {\n    const previousTeams = JSON.parse(JSON.stringify(teams));\n    const newTeams = [...teams];\n    newTeams[teamIndex].base = zoneId;\n    setTeams(newTeams);\n\n    // Сохраняем в историю\n    saveActionToHistory({\n      type: 'ZONE_CHANGED',\n      zoneId,\n      teamIndex,\n      previousTeams,\n      nextTeams: newTeams\n    });\n  }, [teams, saveActionToHistory]);\n  const toggleZoneToTeam = React.useCallback((zoneId, teamIndex) => {\n    const previousTeams = JSON.parse(JSON.stringify(teams));\n    const newTeams = [...teams];\n\n    // Проверяем, есть ли уже эта территория у команды\n    const currentTeamHasZone = newTeams[teamIndex].zones.includes(zoneId);\n    if (currentTeamHasZone) {\n      // Убираем территорию у команды\n      newTeams[teamIndex].zones = newTeams[teamIndex].zones.filter(z => z !== zoneId);\n\n      // Если это была столица, убираем и столицу\n      if (newTeams[teamIndex].base === zoneId) {\n        newTeams[teamIndex].base = null;\n      }\n    } else {\n      // Убираем территорию у предыдущего владельца\n      for (let i = 0; i < newTeams.length; i++) {\n        if (newTeams[i].zones.includes(zoneId)) {\n          newTeams[i].zones = newTeams[i].zones.filter(z => z !== zoneId);\n\n          // Если у предыдущего владельца это была столица, убираем столицу\n          if (newTeams[i].base === zoneId) {\n            newTeams[i].base = null;\n          }\n          break;\n        }\n      }\n\n      // Добавляем территорию новой команде\n      newTeams[teamIndex].zones.push(zoneId);\n\n      // Если это первая территория в режиме подготовки, устанавливаем столицу\n      if (gameState === 'prepare' && !newTeams[teamIndex].base) {\n        newTeams[teamIndex].base = zoneId;\n      }\n    }\n    setTeams(newTeams);\n\n    // Сохраняем в историю\n    saveActionToHistory({\n      type: 'ZONE_CHANGED',\n      zoneId,\n      teamIndex,\n      previousTeams,\n      nextTeams: newTeams\n    });\n  }, [teams, gameState, saveActionToHistory]);\n  const onTurnComplete = React.useCallback(() => {\n    const previousState = {\n      previousTeams: JSON.parse(JSON.stringify(teams)),\n      previousTurn: currentTurn,\n      previousActiveTeam: activeTeam,\n      previousRound: roundNumber,\n      previousTurnsOrder: [...turnsOrder]\n    };\n    const nextTeam = turnsOrder.slice(currentTurn + 1).find(teamIndex => teams[teamIndex].zones.length > 0);\n    let newTurn = currentTurn;\n    let newActiveTeam = activeTeam;\n    let newRound = roundNumber;\n    let newTurnsOrder = turnsOrder;\n    if (typeof nextTeam !== 'undefined') {\n      newTurn = currentTurn + 1;\n      newActiveTeam = nextTeam;\n    } else {\n      newRound = roundNumber + 1;\n      newTurn = 0;\n      newTurnsOrder = shuffleTurnsOrder([...turnsOrder].map(teamIndex => teams[teamIndex].zones.length > 0 ? teamIndex : undefined).filter(i => typeof i !== 'undefined'));\n      newActiveTeam = newTurnsOrder[0];\n    }\n    setCurrentTurn(newTurn);\n    setActiveTeam(newActiveTeam);\n    setRoundNumber(newRound);\n    setTurnsOrder(newTurnsOrder);\n\n    // Сохраняем в историю\n    saveActionToHistory({\n      type: 'TURN_COMPLETED',\n      ...previousState,\n      nextTurn: newTurn,\n      nextActiveTeam: newActiveTeam,\n      nextRound: newRound,\n      nextTurnsOrder: newTurnsOrder,\n      nextTeams: teams\n    });\n  }, [currentTurn, roundNumber, teams, turnsOrder, activeTeam, saveActionToHistory]);\n  const onZoneClick = React.useCallback((zoneId, isRightClick) => {\n    if (gameState === 'prepare' && activeTeam !== null) {\n      toggleZoneToTeam(zoneId, activeTeam);\n    }\n    if (gameState === 'started') {\n      const zoneOwner = teams.find(team => team.zones.includes(zoneId));\n      const zoneOwnerId = teams.findIndex(team => team.zones.includes(zoneId));\n      const newTeams = [...teams];\n      if (isRightClick) {\n        if (!zoneOwner || zoneOwnerId === activeTeam) return;\n        if (zoneOwner && zoneOwner.base === zoneId) {\n          newTeams[zoneOwnerId].score += 200;\n        } else {\n          newTeams[zoneOwnerId].score += 100;\n        }\n        setTeams(newTeams);\n        onTurnComplete();\n      }\n      if (!isRightClick) {\n        // neutral tile: open capture modal\n        if (!zoneOwner) {\n          setPendingCaptureZone(zoneId);\n          setCaptureState({\n            attackerAnswered: false,\n            defenderAnswered: false,\n            attackerCorrect: null,\n            defenderCorrect: null,\n            firstResponder: null,\n            isNeutral: true,\n            attackerAnswer: null,\n            defenderAnswer: null,\n            responseOrder: []\n          });\n          return;\n        }\n\n        // own tile: ignore\n        if (zoneOwnerId === activeTeam) {\n          return;\n        }\n\n        // enemy tile: open confirmation window\n        setPendingCaptureZone(zoneId);\n        setCaptureState({\n          attackerAnswered: false,\n          defenderAnswered: false,\n          attackerCorrect: null,\n          defenderCorrect: null,\n          firstResponder: null,\n          isNeutral: false,\n          attackerAnswer: null,\n          defenderAnswer: null,\n          responseOrder: []\n        });\n      }\n    }\n  }, [activeTeam, gameState, onTurnComplete, teams, toggleZoneToTeam]);\n  const cancelCapture = React.useCallback(() => {\n    setPendingCaptureZone(null);\n    setCaptureState({\n      attackerAnswered: false,\n      defenderAnswered: false,\n      attackerCorrect: null,\n      defenderCorrect: null,\n      firstResponder: null,\n      isNeutral: false,\n      attackerAnswer: null,\n      defenderAnswer: null,\n      responseOrder: []\n    });\n  }, []);\n  const maybeResolveCapture = React.useCallback((state, zoneId) => {\n    if (!state.attackerAnswered || !state.defenderAnswered) return;\n    const previousState = {\n      previousTeams: JSON.parse(JSON.stringify(teams)),\n      previousTurn: currentTurn,\n      previousActiveTeam: activeTeam,\n      previousRound: roundNumber\n    };\n    const zoneOwner = teams.find(team => team.zones.includes(zoneId));\n    const zoneOwnerId = teams.findIndex(team => team.zones.includes(zoneId));\n    if (!zoneOwner || zoneOwnerId === -1) {\n      return;\n    }\n    let winner = 'defender';\n    if (!state.attackerCorrect && !state.defenderCorrect) {\n      winner = 'defender';\n    } else if (state.attackerCorrect && !state.defenderCorrect) {\n      winner = 'attacker';\n    } else if (!state.attackerCorrect && state.defenderCorrect) {\n      winner = 'defender';\n    } else if (state.attackerCorrect && state.defenderCorrect) {\n      winner = state.responseOrder[0] === 'attacker' ? 'attacker' : 'defender';\n    }\n    const newTeams = [...teams];\n    if (winner === 'attacker' && zoneOwnerId !== activeTeam) {\n      if (zoneOwner.base === zoneId) {\n        newTeams[activeTeam].score += 400;\n\n        // Capture all zones of the defeated team\n        const zonesToCapture = [...newTeams[zoneOwnerId].zones];\n        zonesToCapture.forEach(zone => {\n          if (zone !== zoneId) {\n            // Remove from defeated team\n            newTeams[zoneOwnerId].zones = newTeams[zoneOwnerId].zones.filter(z => z !== zone);\n            // Add to attacker team\n            if (!newTeams[activeTeam].zones.includes(zone)) {\n              newTeams[activeTeam].zones.push(zone);\n            }\n          }\n        });\n\n        // Remove base from defeated team\n        newTeams[zoneOwnerId].base = null;\n\n        // Capture the base zone\n        newTeams[zoneOwnerId].zones = newTeams[zoneOwnerId].zones.filter(z => z !== zoneId);\n        newTeams[activeTeam].zones.push(zoneId);\n        newTeams[activeTeam].base = zoneId;\n      } else {\n        newTeams[activeTeam].score += 100;\n        // Remove from defender and add to attacker\n        newTeams[zoneOwnerId].zones = newTeams[zoneOwnerId].zones.filter(z => z !== zoneId);\n        newTeams[activeTeam].zones.push(zoneId);\n      }\n    }\n    setTeams(newTeams);\n    setPendingCaptureZone(null);\n    setCaptureState({\n      attackerAnswered: false,\n      defenderAnswered: false,\n      attackerCorrect: null,\n      defenderCorrect: null,\n      firstResponder: null,\n      isNeutral: false,\n      attackerAnswer: null,\n      defenderAnswer: null,\n      responseOrder: []\n    });\n\n    // Сохраняем в историю\n    saveActionToHistory({\n      type: 'CAPTURE_RESOLVED',\n      ...previousState,\n      nextTeams: newTeams,\n      nextTurn: currentTurn,\n      nextActiveTeam: activeTeam,\n      nextRound: roundNumber,\n      zoneId,\n      winner\n    });\n    onTurnComplete();\n  }, [activeTeam, onTurnComplete, teams, currentTurn, roundNumber, saveActionToHistory]);\n  const handleAttackerAnswer = React.useCallback(isCorrect => {\n    if (!pendingCaptureZone) return;\n\n    // Для нейтральных территорий\n    if (captureState.isNeutral) {\n      // Если уже выбран этот вариант - отменяем выбор\n      if (captureState.attackerAnswer === isCorrect) {\n        setCaptureState(prev => ({\n          ...prev,\n          attackerAnswer: null,\n          responseOrder: prev.responseOrder.filter(item => item !== 'attacker')\n        }));\n        return;\n      }\n      const newTeams = [...teams];\n      if (isCorrect) {\n        newTeams[activeTeam].score += 100;\n        // Добавляем территорию команде\n        if (!newTeams[activeTeam].zones.includes(pendingCaptureZone)) {\n          newTeams[activeTeam].zones.push(pendingCaptureZone);\n        }\n      }\n      setTeams(newTeams);\n      setPendingCaptureZone(null);\n      setCaptureState({\n        attackerAnswered: false,\n        defenderAnswered: false,\n        attackerCorrect: null,\n        defenderCorrect: null,\n        firstResponder: null,\n        isNeutral: false,\n        attackerAnswer: null,\n        defenderAnswer: null,\n        responseOrder: []\n      });\n      onTurnComplete();\n      return;\n    }\n\n    // Для вражеских территорий - переключаем выбор\n    setCaptureState(prev => {\n      // Если уже выбран этот вариант - отменяем выбор\n      if (prev.attackerAnswer === isCorrect) {\n        return {\n          ...prev,\n          attackerAnswer: null,\n          attackerAnswered: false,\n          responseOrder: prev.responseOrder.filter(item => item !== 'attacker')\n        };\n      }\n      const newResponseOrder = [...prev.responseOrder];\n      if (!newResponseOrder.includes('attacker')) {\n        newResponseOrder.push('attacker');\n      }\n      const next = {\n        ...prev,\n        attackerAnswer: isCorrect,\n        attackerAnswered: true,\n        attackerCorrect: isCorrect,\n        responseOrder: newResponseOrder\n      };\n\n      // Проверяем, оба ли ответили\n      if (next.attackerAnswered && next.defenderAnswered) {\n        maybeResolveCapture(next, pendingCaptureZone);\n      }\n      return next;\n    });\n  }, [captureState.isNeutral, captureState.attackerAnswer, maybeResolveCapture, onTurnComplete, pendingCaptureZone, activeTeam, teams]);\n  const handleDefenderAnswer = React.useCallback(isCorrect => {\n    if (!pendingCaptureZone) return;\n    setCaptureState(prev => {\n      // Если уже выбран этот вариант - отменяем выбор\n      if (prev.defenderAnswer === isCorrect) {\n        return {\n          ...prev,\n          defenderAnswer: null,\n          defenderAnswered: false,\n          responseOrder: prev.responseOrder.filter(item => item !== 'defender')\n        };\n      }\n      const newResponseOrder = [...prev.responseOrder];\n      if (!newResponseOrder.includes('defender')) {\n        newResponseOrder.push('defender');\n      }\n      const next = {\n        ...prev,\n        defenderAnswer: isCorrect,\n        defenderAnswered: true,\n        defenderCorrect: isCorrect,\n        responseOrder: newResponseOrder\n      };\n\n      // Проверяем, оба ли ответили\n      if (next.attackerAnswered && next.defenderAnswered) {\n        maybeResolveCapture(next, pendingCaptureZone);\n      }\n      return next;\n    });\n  }, [maybeResolveCapture, pendingCaptureZone]);\n\n  // Обработчик добавления команды с сохранением в историю\n  const handleTeamAdded = React.useCallback(teamName => {\n    const color = availableColors[availableColors.length - 1];\n    const newAvailableColors = availableColors.slice(0, -1);\n    const newTeam = {\n      name: teamName,\n      score: 1000,\n      zones: [],\n      color: color,\n      base: null\n    };\n    const newTeams = [...teams, newTeam];\n\n    // Сохраняем в историю\n    saveActionToHistory({\n      type: 'TEAM_ADDED',\n      team: newTeam,\n      previousTeams: teams\n    });\n    setTeams(newTeams);\n    setAvailableColors(newAvailableColors);\n  }, [teams, availableColors, saveActionToHistory]);\n\n  // Обработчик начала игры с сохранением в историю\n  const handleGameStart = React.useCallback(() => {\n    const previousState = {\n      previousTeams: JSON.parse(JSON.stringify(teams)),\n      previousActiveTeam: activeTeam\n    };\n    const nextTurnsOrder = teams.map((tmp, index) => index);\n    const nextActiveTeam = 0;\n\n    // Сохраняем в историю\n    saveActionToHistory({\n      type: 'GAME_STARTED',\n      ...previousState,\n      nextTeams: teams,\n      nextActiveTeam,\n      nextTurnsOrder: nextTurnsOrder\n    });\n    setGameState('started');\n    setCurrentTurn(0);\n    setRoundNumber(1);\n    setTurnsOrder(nextTurnsOrder);\n    setActiveTeam(nextActiveTeam);\n  }, [teams, activeTeam, saveActionToHistory]);\n\n  // Определяем порядок для отображения - теперь функция будет возвращать порядок только для активной кнопки\n  const getOrderForPlayer = (player, isActive) => {\n    if (!isActive) return '';\n    const index = captureState.responseOrder.indexOf(player);\n    return index !== -1 ? (index + 1).toString() : '';\n  };\n  return /*#__PURE__*/_jsxDEV(GameContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Map, {\n      teams: teams,\n      basePositions: basePositions,\n      gameState: gameState,\n      disabledZones: gameState === 'prepare' && activeTeam !== null ? map.getAdjucentZones(teams.filter((_, index) => index !== activeTeam).flatMap(team => team.zones)) : [],\n      onZoneClick: onZoneClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 831,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GameControls, {\n      teams: teams,\n      activeTeam: activeTeam,\n      onTeamAdded: handleTeamAdded,\n      onTeamClick: teamIndex => {\n        if (gameState === 'prepare') {\n          setActiveTeam(teamIndex === activeTeam ? null : teamIndex);\n        }\n      },\n      onGameStart: handleGameStart,\n      onTurnComplete: onTurnComplete,\n      gameState: gameState,\n      currentTurn: turnsOrder[currentTurn],\n      roundNumber: roundNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 844,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(UndoButton, {\n      disabled: actionHistory.length === 0,\n      onClick: undo,\n      title: actionHistory.length === 0 ? \"Нет действий для отмены\" : \"Отменить последнее действие\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/images/undo-icon.png\",\n        alt: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 866,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 861,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RedoButton, {\n      disabled: futureActions.length === 0,\n      onClick: redo,\n      title: futureActions.length === 0 ? \"Нет действий для повтора\" : \"Повторить отмененное действие\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/images/redo-icon.png\",\n        alt: \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 874,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 869,\n      columnNumber: 7\n    }, this), pendingCaptureZone && /*#__PURE__*/_jsxDEV(CaptureModalBackdrop, {\n      children: /*#__PURE__*/_jsxDEV(CaptureModalCard, {\n        children: [/*#__PURE__*/_jsxDEV(CaptureModalTitle, {\n          children: [\"\\u0417\\u0430\\u0445\\u0432\\u0430\\u0442\\u0438\\u0442\\u044C \\u0437\\u043E\\u043D\\u0443 \", pendingCaptureZone, \"?\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 880,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CaptureModalText, {\n          children: captureState.isNeutral ? 'Захват нейтральной территории. Выполните задание и выберите результат.' : 'Захват вражеской территории. Здесь будет описание задания или подсказка для игрока. После выполнения задания выберите результат атаки для атакующих и защищающихся.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 883,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CaptureModalImagePlaceholder, {\n          children: \"Image placeholder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CaptureModalActions, {\n          children: captureState.isNeutral ?\n          /*#__PURE__*/\n          // Для нейтральных территорий - только две кнопки для атакующего\n          _jsxDEV(CaptureModalColumn, {\n            style: {\n              margin: '0 auto'\n            },\n            children: [/*#__PURE__*/_jsxDEV(CaptureButton, {\n              className: `confirm ${captureState.attackerAnswer === true ? 'active' : ''}`,\n              onClick: () => handleAttackerAnswer(true),\n              \"data-order\": getOrderForPlayer('attacker', captureState.attackerAnswer === true),\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"/images/success-icon.png\",\n                alt: \"\\u0423\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 900,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 895,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(CaptureButton, {\n              className: `cancel ${captureState.attackerAnswer === false ? 'active' : ''}`,\n              onClick: () => handleAttackerAnswer(false),\n              \"data-order\": getOrderForPlayer('attacker', captureState.attackerAnswer === false),\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"/images/fail-icon.png\",\n                alt: \"\\u041D\\u0435\\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 907,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 902,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 894,\n            columnNumber: 17\n          }, this) :\n          /*#__PURE__*/\n          // Для вражеских территорий - обе колонки\n          _jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(CaptureModalColumn, {\n              children: [/*#__PURE__*/_jsxDEV(CaptureButton, {\n                className: `confirm ${captureState.attackerAnswer === true ? 'active' : ''}`,\n                onClick: () => handleAttackerAnswer(true),\n                \"data-order\": getOrderForPlayer('attacker', captureState.attackerAnswer === true),\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/images/attack-correct-icon.png\",\n                  alt: \"\\u0410\\u0442\\u0430\\u043A\\u0443\\u044E\\u0449\\u0438\\u0435 \\u0432\\u0435\\u0440\\u043D\\u043E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 919,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 914,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(CaptureButton, {\n                className: `cancel ${captureState.attackerAnswer === false ? 'active' : ''}`,\n                onClick: () => handleAttackerAnswer(false),\n                \"data-order\": getOrderForPlayer('attacker', captureState.attackerAnswer === false),\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/images/attack-wrong-icon.png\",\n                  alt: \"\\u0410\\u0442\\u0430\\u043A\\u0443\\u044E\\u0449\\u0438\\u0435 \\u043D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 926,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 921,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 913,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(CaptureModalColumn, {\n              children: [/*#__PURE__*/_jsxDEV(CaptureButton, {\n                className: `confirm-alt ${captureState.defenderAnswer === true ? 'active' : ''}`,\n                onClick: () => handleDefenderAnswer(true),\n                \"data-order\": getOrderForPlayer('defender', captureState.defenderAnswer === true),\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/images/defend-correct-icon.png\",\n                  alt: \"\\u0417\\u0430\\u0449\\u0438\\u0449\\u0430\\u044E\\u0449\\u0438\\u0435\\u0441\\u044F \\u0432\\u0435\\u0440\\u043D\\u043E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 935,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 930,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(CaptureButton, {\n                className: `cancel-alt ${captureState.defenderAnswer === false ? 'active' : ''}`,\n                onClick: () => handleDefenderAnswer(false),\n                \"data-order\": getOrderForPlayer('defender', captureState.defenderAnswer === false),\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/images/defend-wrong-icon.png\",\n                  alt: \"\\u0417\\u0430\\u0449\\u0438\\u0449\\u0430\\u044E\\u0449\\u0438\\u0435\\u0441\\u044F \\u043D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 942,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 937,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 929,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 891,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 879,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 878,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 830,\n    columnNumber: 5\n  }, this);\n};\n_s(Game, \"BpaMFwemk9N8l4gAxFiut6cP70c=\");\n_c10 = Game;\nexport default Game;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10;\n$RefreshReg$(_c, \"GameContainer\");\n$RefreshReg$(_c2, \"CaptureModalBackdrop\");\n$RefreshReg$(_c3, \"CaptureModalCard\");\n$RefreshReg$(_c4, \"CaptureModalImagePlaceholder\");\n$RefreshReg$(_c5, \"CaptureModalTitle\");\n$RefreshReg$(_c6, \"CaptureModalText\");\n$RefreshReg$(_c7, \"CaptureModalActions\");\n$RefreshReg$(_c8, \"CaptureButton\");\n$RefreshReg$(_c9, \"CaptureModalColumn\");\n$RefreshReg$(_c0, \"UndoButton\");\n$RefreshReg$(_c1, \"RedoButton\");\n$RefreshReg$(_c10, \"Game\");","map":{"version":3,"names":["React","styled","GameControls","Map","shuffleArray","jsxDEV","_jsxDEV","Fragment","_Fragment","GameContainer","div","_c","CaptureModalBackdrop","_c2","CaptureModalCard","_c3","CaptureModalImagePlaceholder","_c4","CaptureModalTitle","h2","_c5","CaptureModalText","p","_c6","CaptureModalActions","_c7","CaptureButton","button","_c8","CaptureModalColumn","_c9","ActionButton","props","disabled","UndoButton","_c0","RedoButton","_c1","shuffleTurnsOrder","arr","concat","splice","initialColors","Game","map","_s","teams","setTeams","useState","gameState","setGameState","turnsOrder","setTurnsOrder","currentTurn","setCurrentTurn","roundNumber","setRoundNumber","activeTeam","setActiveTeam","pendingCaptureZone","setPendingCaptureZone","captureState","setCaptureState","attackerAnswered","defenderAnswered","attackerCorrect","defenderCorrect","firstResponder","isNeutral","attackerAnswer","defenderAnswer","responseOrder","availableColors","setAvailableColors","actionHistory","setActionHistory","futureActions","setFutureActions","saveActionToHistory","useCallback","action","prev","timestamp","Date","now","undo","length","lastAction","type","newTeamsAfterUndo","slice","team","color","previousTeams","previousTurn","previousActiveTeam","previousRound","previousTurnsOrder","redo","nextAction","filter","nextTeams","nextTurn","nextActiveTeam","nextRound","nextTurnsOrder","basePositions","useMemo","base","Boolean","setBase","zoneId","teamIndex","JSON","parse","stringify","newTeams","toggleZoneToTeam","currentTeamHasZone","zones","includes","z","i","push","onTurnComplete","previousState","nextTeam","find","newTurn","newActiveTeam","newRound","newTurnsOrder","undefined","onZoneClick","isRightClick","zoneOwner","zoneOwnerId","findIndex","score","cancelCapture","maybeResolveCapture","state","winner","zonesToCapture","forEach","zone","handleAttackerAnswer","isCorrect","item","newResponseOrder","next","handleDefenderAnswer","handleTeamAdded","teamName","newAvailableColors","newTeam","name","handleGameStart","tmp","index","getOrderForPlayer","player","isActive","indexOf","toString","children","disabledZones","getAdjucentZones","_","flatMap","fileName","_jsxFileName","lineNumber","columnNumber","onTeamAdded","onTeamClick","onGameStart","onClick","title","src","alt","style","margin","className","_c10","$RefreshReg$"],"sources":["D:/siteauth/my-website — копия/src/components/game.js"],"sourcesContent":["import * as React from 'react';\r\nimport styled from 'styled-components';\r\nimport GameControls from './game-controls';\r\nimport Map from './map';\r\nimport { shuffleArray } from '../logic/utils';\r\n\r\nconst GameContainer = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  padding: 10px;\r\n  position: relative;\r\n  height: calc(100% - 20px);\r\n`;\r\n\r\nconst CaptureModalBackdrop = styled.div`\r\n  position: fixed;\r\n  inset: 0;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n`;\r\n\r\nconst CaptureModalCard = styled.div`\r\n  background: #ffffff;\r\n  border-radius: 16px;\r\n  padding: 24px 24px 72px;\r\n  width: 95%;\r\n  max-width: 1100px;\r\n  height: 80vh;\r\n  box-shadow: 0 24px 80px rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n`;\r\n\r\nconst CaptureModalImagePlaceholder = styled.div`\r\n  width: 100%;\r\n  height: 80px;\r\n  border-radius: 8px;\r\n  background: #f2f2f2;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #777;\r\n  font-size: 14px;\r\n  margin-top: 8px;\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nconst CaptureModalTitle = styled.h2`\r\n  margin: 0 0 8px;\r\n  font-size: 20px;\r\n`;\r\n\r\nconst CaptureModalText = styled.p`\r\n  margin: 12px 0 20px;\r\n  font-size: 14px;\r\n  color: #444;\r\n`;\r\n\r\nconst CaptureModalActions = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-end;\r\n  gap: 24px;\r\n  position: absolute;\r\n  left: 24px;\r\n  right: 24px;\r\n  bottom: 24px;\r\n`;\r\n\r\nconst CaptureButton = styled.button`\r\n  position: relative;\r\n  width: 100px;\r\n  height: 100px;\r\n  padding: 0;\r\n  border-radius: 12px;\r\n  border: none;\r\n  cursor: pointer;\r\n  transition: transform 0.05s ease-in-out, box-shadow 0.05s ease-in-out,\r\n    background-color 0.1s ease-in-out, filter 0.1s ease-in-out;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  &::after {\r\n    content: attr(data-order);\r\n    position: absolute;\r\n    top: 6px;\r\n    right: 6px;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 999px;\r\n    background: rgba(0, 0, 0, 0.15);\r\n    color: #111;\r\n    font-size: 12px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  &:active {\r\n    transform: translateY(1px);\r\n    filter: brightness(0.9);\r\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.35);\r\n  }\r\n\r\n  &.cancel {\r\n    background: #e5e5e5;\r\n    \r\n    &.active {\r\n      background: #d4d4d4;\r\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\r\n    }\r\n  }\r\n\r\n  &.confirm {\r\n    background: #16a34a;\r\n    \r\n    &.active {\r\n      background: #15803d;\r\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\r\n    }\r\n  }\r\n\r\n  &.confirm-alt {\r\n    background: #22c55e;\r\n    \r\n    &.active {\r\n      background: #16a34a;\r\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\r\n    }\r\n  }\r\n\r\n  &.cancel-alt {\r\n    background: #f97316;\r\n    \r\n    &.active {\r\n      background: #ea580c;\r\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\r\n    }\r\n  }\r\n\r\n  img {\r\n    width: 80%;\r\n    height: 80%;\r\n    object-fit: contain;\r\n  }\r\n`;\r\n\r\nconst CaptureModalColumn = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n`;\r\n\r\nconst ActionButton = styled.button`\r\n  position: absolute;\r\n  bottom: 20px;\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 8px;\r\n  border: none;\r\n  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: ${props => props.disabled ? '#ccc' : '#16a34a'};\r\n  opacity: ${props => props.disabled ? 0.5 : 1};\r\n  transition: all 0.2s ease;\r\n  \r\n  &:hover:not(:disabled) {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n  }\r\n  \r\n  img {\r\n    width: 70%;\r\n    height: 70%;\r\n    object-fit: contain;\r\n  }\r\n`;\r\n\r\nconst UndoButton = styled(ActionButton)`\r\n  left: 20px;\r\n`;\r\n\r\nconst RedoButton = styled(ActionButton)`\r\n  right: 20px;\r\n`;\r\n\r\nconst shuffleTurnsOrder = (arr) => arr.concat(arr.splice(0, 1));\r\n\r\nconst initialColors = shuffleArray([\r\n  '#7975b9',\r\n  '#007F73',\r\n  '#FB9AD1',\r\n  '#FFC470',\r\n  '#C5FF95',\r\n  '#4793AF',\r\n  '#ff7171',\r\n]);\r\n\r\nconst Game = ({ map }) => {\r\n  const [teams, setTeams] = React.useState([]);\r\n  const [gameState, setGameState] = React.useState('prepare');\r\n  const [turnsOrder, setTurnsOrder] = React.useState([]);\r\n  const [currentTurn, setCurrentTurn] = React.useState(null);\r\n  const [roundNumber, setRoundNumber] = React.useState(0);\r\n  const [activeTeam, setActiveTeam] = React.useState(null);\r\n  const [pendingCaptureZone, setPendingCaptureZone] = React.useState(null);\r\n  const [captureState, setCaptureState] = React.useState({\r\n    attackerAnswered: false,\r\n    defenderAnswered: false,\r\n    attackerCorrect: null,\r\n    defenderCorrect: null,\r\n    firstResponder: null,\r\n    isNeutral: false,\r\n    attackerAnswer: null,\r\n    defenderAnswer: null,\r\n    responseOrder: [],\r\n  });\r\n  \r\n  const [availableColors, setAvailableColors] = React.useState([...initialColors]);\r\n  \r\n  // Новые состояния для undo/redo\r\n  const [actionHistory, setActionHistory] = React.useState([]);\r\n  const [futureActions, setFutureActions] = React.useState([]);\r\n\r\n  // Функция для сохранения действия в историю\r\n  const saveActionToHistory = React.useCallback((action) => {\r\n    setActionHistory(prev => [...prev, {\r\n      ...action,\r\n      timestamp: Date.now()\r\n    }]);\r\n    // Очищаем будущие действия при новом действии\r\n    setFutureActions([]);\r\n  }, []);\r\n\r\n  // Функция отката действия\r\n  const undo = React.useCallback(() => {\r\n    if (actionHistory.length === 0) return;\r\n\r\n    const lastAction = actionHistory[actionHistory.length - 1];\r\n    \r\n    // Восстанавливаем предыдущее состояние\r\n    switch (lastAction.type) {\r\n      case 'TEAM_ADDED':\r\n        // Удаляем последнюю команду\r\n        const newTeamsAfterUndo = teams.slice(0, -1);\r\n        setTeams(newTeamsAfterUndo);\r\n        setAvailableColors(prev => [...prev, lastAction.team.color]);\r\n        break;\r\n        \r\n      case 'ZONE_CHANGED':\r\n        // Восстанавливаем предыдущее состояние команд\r\n        setTeams(lastAction.previousTeams);\r\n        break;\r\n        \r\n      case 'TURN_COMPLETED':\r\n        // Восстанавливаем состояние хода\r\n        setCurrentTurn(lastAction.previousTurn);\r\n        setActiveTeam(lastAction.previousActiveTeam);\r\n        setRoundNumber(lastAction.previousRound);\r\n        setTurnsOrder(lastAction.previousTurnsOrder);\r\n        setTeams(lastAction.previousTeams);\r\n        break;\r\n        \r\n      case 'GAME_STARTED':\r\n        // Возвращаем в состояние подготовки\r\n        setGameState('prepare');\r\n        setActiveTeam(lastAction.previousActiveTeam);\r\n        setTeams(lastAction.previousTeams);\r\n        setCurrentTurn(null);\r\n        setRoundNumber(0);\r\n        setTurnsOrder([]);\r\n        break;\r\n        \r\n      case 'CAPTURE_RESOLVED':\r\n        // Восстанавливаем состояние до захвата\r\n        setTeams(lastAction.previousTeams);\r\n        setCurrentTurn(lastAction.previousTurn);\r\n        setActiveTeam(lastAction.previousActiveTeam);\r\n        setRoundNumber(lastAction.previousRound);\r\n        setPendingCaptureZone(null);\r\n        break;\r\n        \r\n      default:\r\n        break;\r\n    }\r\n\r\n    // Перемещаем действие в будущие действия\r\n    setFutureActions(prev => [lastAction, ...prev]);\r\n    setActionHistory(prev => prev.slice(0, -1));\r\n  }, [actionHistory, teams]);\r\n\r\n  // Функция повтора действия\r\n  const redo = React.useCallback(() => {\r\n    if (futureActions.length === 0) return;\r\n\r\n    const nextAction = futureActions[0];\r\n    \r\n    // Применяем действие снова\r\n    switch (nextAction.type) {\r\n      case 'TEAM_ADDED':\r\n        // Добавляем команду обратно\r\n        setTeams(prev => [...prev, nextAction.team]);\r\n        setAvailableColors(prev => prev.filter(color => color !== nextAction.team.color));\r\n        break;\r\n        \r\n      case 'ZONE_CHANGED':\r\n        // Восстанавливаем следующее состояние\r\n        setTeams(nextAction.nextTeams);\r\n        break;\r\n        \r\n      case 'TURN_COMPLETED':\r\n        // Восстанавливаем следующее состояние хода\r\n        setCurrentTurn(nextAction.nextTurn);\r\n        setActiveTeam(nextAction.nextActiveTeam);\r\n        setRoundNumber(nextAction.nextRound);\r\n        setTurnsOrder(nextAction.nextTurnsOrder);\r\n        setTeams(nextAction.nextTeams);\r\n        break;\r\n        \r\n      case 'GAME_STARTED':\r\n        // Запускаем игру снова\r\n        setGameState('started');\r\n        setActiveTeam(nextAction.nextActiveTeam);\r\n        setTeams(nextAction.nextTeams);\r\n        setCurrentTurn(0);\r\n        setRoundNumber(1);\r\n        setTurnsOrder(nextAction.nextTurnsOrder);\r\n        break;\r\n        \r\n      case 'CAPTURE_RESOLVED':\r\n        // Восстанавливаем состояние после захвата\r\n        setTeams(nextAction.nextTeams);\r\n        setCurrentTurn(nextAction.nextTurn);\r\n        setActiveTeam(nextAction.nextActiveTeam);\r\n        setRoundNumber(nextAction.nextRound);\r\n        break;\r\n        \r\n      default:\r\n        break;\r\n    }\r\n\r\n    // Возвращаем действие в историю\r\n    setActionHistory(prev => [...prev, nextAction]);\r\n    setFutureActions(prev => prev.slice(1));\r\n  }, [futureActions]);\r\n\r\n  // Получаем basePositions из teams\r\n  const basePositions = React.useMemo(() => {\r\n    return teams.map(team => team.base).filter(Boolean);\r\n  }, [teams]);\r\n\r\n  const setBase = React.useCallback(\r\n    (zoneId, teamIndex) => {\r\n      const previousTeams = JSON.parse(JSON.stringify(teams));\r\n      \r\n      const newTeams = [...teams];\r\n      newTeams[teamIndex].base = zoneId;\r\n      setTeams(newTeams);\r\n      \r\n      // Сохраняем в историю\r\n      saveActionToHistory({\r\n        type: 'ZONE_CHANGED',\r\n        zoneId,\r\n        teamIndex,\r\n        previousTeams,\r\n        nextTeams: newTeams\r\n      });\r\n    },\r\n    [teams, saveActionToHistory]\r\n  );\r\n\r\n  const toggleZoneToTeam = React.useCallback(\r\n    (zoneId, teamIndex) => {\r\n      const previousTeams = JSON.parse(JSON.stringify(teams));\r\n\r\n      const newTeams = [...teams];\r\n\r\n      // Проверяем, есть ли уже эта территория у команды\r\n      const currentTeamHasZone = newTeams[teamIndex].zones.includes(zoneId);\r\n      \r\n      if (currentTeamHasZone) {\r\n        // Убираем территорию у команды\r\n        newTeams[teamIndex].zones = newTeams[teamIndex].zones.filter((z) => z !== zoneId);\r\n        \r\n        // Если это была столица, убираем и столицу\r\n        if (newTeams[teamIndex].base === zoneId) {\r\n          newTeams[teamIndex].base = null;\r\n        }\r\n      } else {\r\n        // Убираем территорию у предыдущего владельца\r\n        for (let i = 0; i < newTeams.length; i++) {\r\n          if (newTeams[i].zones.includes(zoneId)) {\r\n            newTeams[i].zones = newTeams[i].zones.filter((z) => z !== zoneId);\r\n            \r\n            // Если у предыдущего владельца это была столица, убираем столицу\r\n            if (newTeams[i].base === zoneId) {\r\n              newTeams[i].base = null;\r\n            }\r\n            break;\r\n          }\r\n        }\r\n        \r\n        // Добавляем территорию новой команде\r\n        newTeams[teamIndex].zones.push(zoneId);\r\n        \r\n        // Если это первая территория в режиме подготовки, устанавливаем столицу\r\n        if (gameState === 'prepare' && !newTeams[teamIndex].base) {\r\n          newTeams[teamIndex].base = zoneId;\r\n        }\r\n      }\r\n\r\n      setTeams(newTeams);\r\n      \r\n      // Сохраняем в историю\r\n      saveActionToHistory({\r\n        type: 'ZONE_CHANGED',\r\n        zoneId,\r\n        teamIndex,\r\n        previousTeams,\r\n        nextTeams: newTeams\r\n      });\r\n    },\r\n    [teams, gameState, saveActionToHistory]\r\n  );\r\n\r\n  const onTurnComplete = React.useCallback(() => {\r\n    const previousState = {\r\n      previousTeams: JSON.parse(JSON.stringify(teams)),\r\n      previousTurn: currentTurn,\r\n      previousActiveTeam: activeTeam,\r\n      previousRound: roundNumber,\r\n      previousTurnsOrder: [...turnsOrder]\r\n    };\r\n\r\n    const nextTeam = turnsOrder\r\n      .slice(currentTurn + 1)\r\n      .find((teamIndex) => teams[teamIndex].zones.length > 0);\r\n\r\n    let newTurn = currentTurn;\r\n    let newActiveTeam = activeTeam;\r\n    let newRound = roundNumber;\r\n    let newTurnsOrder = turnsOrder;\r\n\r\n    if (typeof nextTeam !== 'undefined') {\r\n      newTurn = currentTurn + 1;\r\n      newActiveTeam = nextTeam;\r\n    } else {\r\n      newRound = roundNumber + 1;\r\n      newTurn = 0;\r\n\r\n      newTurnsOrder = shuffleTurnsOrder(\r\n        [...turnsOrder]\r\n          .map((teamIndex) => (teams[teamIndex].zones.length > 0 ? teamIndex : undefined))\r\n          .filter((i) => typeof i !== 'undefined')\r\n      );\r\n\r\n      newActiveTeam = newTurnsOrder[0];\r\n    }\r\n\r\n    setCurrentTurn(newTurn);\r\n    setActiveTeam(newActiveTeam);\r\n    setRoundNumber(newRound);\r\n    setTurnsOrder(newTurnsOrder);\r\n    \r\n    // Сохраняем в историю\r\n    saveActionToHistory({\r\n      type: 'TURN_COMPLETED',\r\n      ...previousState,\r\n      nextTurn: newTurn,\r\n      nextActiveTeam: newActiveTeam,\r\n      nextRound: newRound,\r\n      nextTurnsOrder: newTurnsOrder,\r\n      nextTeams: teams\r\n    });\r\n  }, [currentTurn, roundNumber, teams, turnsOrder, activeTeam, saveActionToHistory]);\r\n\r\n  const onZoneClick = React.useCallback(\r\n    (zoneId, isRightClick) => {\r\n      if (gameState === 'prepare' && activeTeam !== null) {\r\n        toggleZoneToTeam(zoneId, activeTeam);\r\n      }\r\n      if (gameState === 'started') {\r\n        const zoneOwner = teams.find((team) => team.zones.includes(zoneId));\r\n        const zoneOwnerId = teams.findIndex((team) => team.zones.includes(zoneId));\r\n        const newTeams = [...teams];\r\n\r\n        if (isRightClick) {\r\n          if (!zoneOwner || zoneOwnerId === activeTeam) return;\r\n\r\n          if (zoneOwner && zoneOwner.base === zoneId) {\r\n            newTeams[zoneOwnerId].score += 200;\r\n          } else {\r\n            newTeams[zoneOwnerId].score += 100;\r\n          }\r\n          setTeams(newTeams);\r\n          onTurnComplete();\r\n        }\r\n        if (!isRightClick) {\r\n          // neutral tile: open capture modal\r\n          if (!zoneOwner) {\r\n            setPendingCaptureZone(zoneId);\r\n            setCaptureState({\r\n              attackerAnswered: false,\r\n              defenderAnswered: false,\r\n              attackerCorrect: null,\r\n              defenderCorrect: null,\r\n              firstResponder: null,\r\n              isNeutral: true,\r\n              attackerAnswer: null,\r\n              defenderAnswer: null,\r\n              responseOrder: [],\r\n            });\r\n            return;\r\n          }\r\n\r\n          // own tile: ignore\r\n          if (zoneOwnerId === activeTeam) {\r\n            return;\r\n          }\r\n\r\n          // enemy tile: open confirmation window\r\n          setPendingCaptureZone(zoneId);\r\n          setCaptureState({\r\n            attackerAnswered: false,\r\n            defenderAnswered: false,\r\n            attackerCorrect: null,\r\n            defenderCorrect: null,\r\n            firstResponder: null,\r\n            isNeutral: false,\r\n            attackerAnswer: null,\r\n            defenderAnswer: null,\r\n            responseOrder: [],\r\n          });\r\n        }\r\n      }\r\n    },\r\n    [activeTeam, gameState, onTurnComplete, teams, toggleZoneToTeam]\r\n  );\r\n\r\n  const cancelCapture = React.useCallback(() => {\r\n    setPendingCaptureZone(null);\r\n    setCaptureState({\r\n      attackerAnswered: false,\r\n      defenderAnswered: false,\r\n      attackerCorrect: null,\r\n      defenderCorrect: null,\r\n      firstResponder: null,\r\n      isNeutral: false,\r\n      attackerAnswer: null,\r\n      defenderAnswer: null,\r\n      responseOrder: [],\r\n    });\r\n  }, []);\r\n\r\n  const maybeResolveCapture = React.useCallback(\r\n    (state, zoneId) => {\r\n      if (!state.attackerAnswered || !state.defenderAnswered) return;\r\n\r\n      const previousState = {\r\n        previousTeams: JSON.parse(JSON.stringify(teams)),\r\n        previousTurn: currentTurn,\r\n        previousActiveTeam: activeTeam,\r\n        previousRound: roundNumber\r\n      };\r\n\r\n      const zoneOwner = teams.find((team) => team.zones.includes(zoneId));\r\n      const zoneOwnerId = teams.findIndex((team) => team.zones.includes(zoneId));\r\n      if (!zoneOwner || zoneOwnerId === -1) {\r\n        return;\r\n      }\r\n\r\n      let winner = 'defender';\r\n\r\n      if (!state.attackerCorrect && !state.defenderCorrect) {\r\n        winner = 'defender';\r\n      } else if (state.attackerCorrect && !state.defenderCorrect) {\r\n        winner = 'attacker';\r\n      } else if (!state.attackerCorrect && state.defenderCorrect) {\r\n        winner = 'defender';\r\n      } else if (state.attackerCorrect && state.defenderCorrect) {\r\n        winner = state.responseOrder[0] === 'attacker' ? 'attacker' : 'defender';\r\n      }\r\n\r\n      const newTeams = [...teams];\r\n\r\n      if (winner === 'attacker' && zoneOwnerId !== activeTeam) {\r\n        if (zoneOwner.base === zoneId) {\r\n          newTeams[activeTeam].score += 400;\r\n\r\n          // Capture all zones of the defeated team\r\n          const zonesToCapture = [...newTeams[zoneOwnerId].zones];\r\n          zonesToCapture.forEach((zone) => {\r\n            if (zone !== zoneId) {\r\n              // Remove from defeated team\r\n              newTeams[zoneOwnerId].zones = newTeams[zoneOwnerId].zones.filter(z => z !== zone);\r\n              // Add to attacker team\r\n              if (!newTeams[activeTeam].zones.includes(zone)) {\r\n                newTeams[activeTeam].zones.push(zone);\r\n              }\r\n            }\r\n          });\r\n          \r\n          // Remove base from defeated team\r\n          newTeams[zoneOwnerId].base = null;\r\n          \r\n          // Capture the base zone\r\n          newTeams[zoneOwnerId].zones = newTeams[zoneOwnerId].zones.filter(z => z !== zoneId);\r\n          newTeams[activeTeam].zones.push(zoneId);\r\n          newTeams[activeTeam].base = zoneId;\r\n        } else {\r\n          newTeams[activeTeam].score += 100;\r\n          // Remove from defender and add to attacker\r\n          newTeams[zoneOwnerId].zones = newTeams[zoneOwnerId].zones.filter(z => z !== zoneId);\r\n          newTeams[activeTeam].zones.push(zoneId);\r\n        }\r\n      }\r\n\r\n      setTeams(newTeams);\r\n      setPendingCaptureZone(null);\r\n      setCaptureState({\r\n        attackerAnswered: false,\r\n        defenderAnswered: false,\r\n        attackerCorrect: null,\r\n        defenderCorrect: null,\r\n        firstResponder: null,\r\n        isNeutral: false,\r\n        attackerAnswer: null,\r\n        defenderAnswer: null,\r\n        responseOrder: [],\r\n      });\r\n      \r\n      // Сохраняем в историю\r\n      saveActionToHistory({\r\n        type: 'CAPTURE_RESOLVED',\r\n        ...previousState,\r\n        nextTeams: newTeams,\r\n        nextTurn: currentTurn,\r\n        nextActiveTeam: activeTeam,\r\n        nextRound: roundNumber,\r\n        zoneId,\r\n        winner\r\n      });\r\n      \r\n      onTurnComplete();\r\n    },\r\n    [activeTeam, onTurnComplete, teams, currentTurn, roundNumber, saveActionToHistory]\r\n  );\r\n\r\n  const handleAttackerAnswer = React.useCallback(\r\n    (isCorrect) => {\r\n      if (!pendingCaptureZone) return;\r\n      \r\n      // Для нейтральных территорий\r\n      if (captureState.isNeutral) {\r\n        // Если уже выбран этот вариант - отменяем выбор\r\n        if (captureState.attackerAnswer === isCorrect) {\r\n          setCaptureState(prev => ({\r\n            ...prev,\r\n            attackerAnswer: null,\r\n            responseOrder: prev.responseOrder.filter(item => item !== 'attacker')\r\n          }));\r\n          return;\r\n        }\r\n\r\n        const newTeams = [...teams];\r\n        if (isCorrect) {\r\n          newTeams[activeTeam].score += 100;\r\n          // Добавляем территорию команде\r\n          if (!newTeams[activeTeam].zones.includes(pendingCaptureZone)) {\r\n            newTeams[activeTeam].zones.push(pendingCaptureZone);\r\n          }\r\n        }\r\n        setTeams(newTeams);\r\n        setPendingCaptureZone(null);\r\n        setCaptureState({\r\n          attackerAnswered: false,\r\n          defenderAnswered: false,\r\n          attackerCorrect: null,\r\n          defenderCorrect: null,\r\n          firstResponder: null,\r\n          isNeutral: false,\r\n          attackerAnswer: null,\r\n          defenderAnswer: null,\r\n          responseOrder: [],\r\n        });\r\n        onTurnComplete();\r\n        return;\r\n      }\r\n\r\n      // Для вражеских территорий - переключаем выбор\r\n      setCaptureState((prev) => {\r\n        // Если уже выбран этот вариант - отменяем выбор\r\n        if (prev.attackerAnswer === isCorrect) {\r\n          return {\r\n            ...prev,\r\n            attackerAnswer: null,\r\n            attackerAnswered: false,\r\n            responseOrder: prev.responseOrder.filter(item => item !== 'attacker')\r\n          };\r\n        }\r\n\r\n        const newResponseOrder = [...prev.responseOrder];\r\n        if (!newResponseOrder.includes('attacker')) {\r\n          newResponseOrder.push('attacker');\r\n        }\r\n\r\n        const next = {\r\n          ...prev,\r\n          attackerAnswer: isCorrect,\r\n          attackerAnswered: true,\r\n          attackerCorrect: isCorrect,\r\n          responseOrder: newResponseOrder,\r\n        };\r\n        \r\n        // Проверяем, оба ли ответили\r\n        if (next.attackerAnswered && next.defenderAnswered) {\r\n          maybeResolveCapture(next, pendingCaptureZone);\r\n        }\r\n        return next;\r\n      });\r\n    },\r\n    [captureState.isNeutral, captureState.attackerAnswer, maybeResolveCapture, onTurnComplete, pendingCaptureZone, activeTeam, teams]\r\n  );\r\n\r\n  const handleDefenderAnswer = React.useCallback(\r\n    (isCorrect) => {\r\n      if (!pendingCaptureZone) return;\r\n      \r\n      setCaptureState((prev) => {\r\n        // Если уже выбран этот вариант - отменяем выбор\r\n        if (prev.defenderAnswer === isCorrect) {\r\n          return {\r\n            ...prev,\r\n            defenderAnswer: null,\r\n            defenderAnswered: false,\r\n            responseOrder: prev.responseOrder.filter(item => item !== 'defender')\r\n          };\r\n        }\r\n\r\n        const newResponseOrder = [...prev.responseOrder];\r\n        if (!newResponseOrder.includes('defender')) {\r\n          newResponseOrder.push('defender');\r\n        }\r\n\r\n        const next = {\r\n          ...prev,\r\n          defenderAnswer: isCorrect,\r\n          defenderAnswered: true,\r\n          defenderCorrect: isCorrect,\r\n          responseOrder: newResponseOrder,\r\n        };\r\n        \r\n        // Проверяем, оба ли ответили\r\n        if (next.attackerAnswered && next.defenderAnswered) {\r\n          maybeResolveCapture(next, pendingCaptureZone);\r\n        }\r\n        return next;\r\n      });\r\n    },\r\n    [maybeResolveCapture, pendingCaptureZone]\r\n  );\r\n\r\n  // Обработчик добавления команды с сохранением в историю\r\n  const handleTeamAdded = React.useCallback((teamName) => {\r\n    const color = availableColors[availableColors.length - 1];\r\n    const newAvailableColors = availableColors.slice(0, -1);\r\n    \r\n    const newTeam = {\r\n      name: teamName,\r\n      score: 1000,\r\n      zones: [],\r\n      color: color,\r\n      base: null,\r\n    };\r\n    \r\n    const newTeams = [...teams, newTeam];\r\n    \r\n    // Сохраняем в историю\r\n    saveActionToHistory({\r\n      type: 'TEAM_ADDED',\r\n      team: newTeam,\r\n      previousTeams: teams\r\n    });\r\n    \r\n    setTeams(newTeams);\r\n    setAvailableColors(newAvailableColors);\r\n  }, [teams, availableColors, saveActionToHistory]);\r\n\r\n  // Обработчик начала игры с сохранением в историю\r\n  const handleGameStart = React.useCallback(() => {\r\n    const previousState = {\r\n      previousTeams: JSON.parse(JSON.stringify(teams)),\r\n      previousActiveTeam: activeTeam\r\n    };\r\n\r\n    const nextTurnsOrder = teams.map((tmp, index) => index);\r\n    const nextActiveTeam = 0;\r\n\r\n    // Сохраняем в историю\r\n    saveActionToHistory({\r\n      type: 'GAME_STARTED',\r\n      ...previousState,\r\n      nextTeams: teams,\r\n      nextActiveTeam,\r\n      nextTurnsOrder: nextTurnsOrder\r\n    });\r\n\r\n    setGameState('started');\r\n    setCurrentTurn(0);\r\n    setRoundNumber(1);\r\n    setTurnsOrder(nextTurnsOrder);\r\n    setActiveTeam(nextActiveTeam);\r\n  }, [teams, activeTeam, saveActionToHistory]);\r\n\r\n  // Определяем порядок для отображения - теперь функция будет возвращать порядок только для активной кнопки\r\n  const getOrderForPlayer = (player, isActive) => {\r\n    if (!isActive) return '';\r\n    const index = captureState.responseOrder.indexOf(player);\r\n    return index !== -1 ? (index + 1).toString() : '';\r\n  };\r\n\r\n  return (\r\n    <GameContainer>\r\n      <Map\r\n        teams={teams}\r\n        basePositions={basePositions}\r\n        gameState={gameState}\r\n        disabledZones={\r\n          gameState === 'prepare' && activeTeam !== null\r\n            ? map.getAdjucentZones(\r\n                teams.filter((_, index) => index !== activeTeam).flatMap((team) => team.zones)\r\n              )\r\n            : []\r\n        }\r\n        onZoneClick={onZoneClick}\r\n      />\r\n      <GameControls\r\n        teams={teams}\r\n        activeTeam={activeTeam}\r\n        onTeamAdded={handleTeamAdded}\r\n        onTeamClick={(teamIndex) => {\r\n          if (gameState === 'prepare') {\r\n            setActiveTeam(teamIndex === activeTeam ? null : teamIndex);\r\n          }\r\n        }}\r\n        onGameStart={handleGameStart}\r\n        onTurnComplete={onTurnComplete}\r\n        gameState={gameState}\r\n        currentTurn={turnsOrder[currentTurn]}\r\n        roundNumber={roundNumber}\r\n      />\r\n      \r\n      {/* Кнопки Undo/Redo */}\r\n      <UndoButton \r\n        disabled={actionHistory.length === 0}\r\n        onClick={undo}\r\n        title={actionHistory.length === 0 ? \"Нет действий для отмены\" : \"Отменить последнее действие\"}\r\n      >\r\n        <img src=\"/images/undo-icon.png\" alt=\"Отменить\" />\r\n      </UndoButton>\r\n      \r\n      <RedoButton \r\n        disabled={futureActions.length === 0}\r\n        onClick={redo}\r\n        title={futureActions.length === 0 ? \"Нет действий для повтора\" : \"Повторить отмененное действие\"}\r\n      >\r\n        <img src=\"/images/redo-icon.png\" alt=\"Повторить\" />\r\n      </RedoButton>\r\n      \r\n      {pendingCaptureZone && (\r\n        <CaptureModalBackdrop>\r\n          <CaptureModalCard>\r\n            <CaptureModalTitle>\r\n              Захватить зону {pendingCaptureZone}?\r\n            </CaptureModalTitle>\r\n            <CaptureModalText>\r\n              {captureState.isNeutral \r\n                ? 'Захват нейтральной территории. Выполните задание и выберите результат.' \r\n                : 'Захват вражеской территории. Здесь будет описание задания или подсказка для игрока. После выполнения задания выберите результат атаки для атакующих и защищающихся.'}\r\n            </CaptureModalText>\r\n            <CaptureModalImagePlaceholder>\r\n              Image placeholder\r\n            </CaptureModalImagePlaceholder>\r\n            <CaptureModalActions>\r\n              {captureState.isNeutral ? (\r\n                // Для нейтральных территорий - только две кнопки для атакующего\r\n                <CaptureModalColumn style={{ margin: '0 auto' }}>\r\n                  <CaptureButton\r\n                    className={`confirm ${captureState.attackerAnswer === true ? 'active' : ''}`}\r\n                    onClick={() => handleAttackerAnswer(true)}\r\n                    data-order={getOrderForPlayer('attacker', captureState.attackerAnswer === true)}\r\n                  >\r\n                    <img src=\"/images/success-icon.png\" alt=\"Успешно\" />\r\n                  </CaptureButton>\r\n                  <CaptureButton\r\n                    className={`cancel ${captureState.attackerAnswer === false ? 'active' : ''}`}\r\n                    onClick={() => handleAttackerAnswer(false)}\r\n                    data-order={getOrderForPlayer('attacker', captureState.attackerAnswer === false)}\r\n                  >\r\n                    <img src=\"/images/fail-icon.png\" alt=\"Неуспешно\" />\r\n                  </CaptureButton>\r\n                </CaptureModalColumn>\r\n              ) : (\r\n                // Для вражеских территорий - обе колонки\r\n                <>\r\n                  <CaptureModalColumn>\r\n                    <CaptureButton\r\n                      className={`confirm ${captureState.attackerAnswer === true ? 'active' : ''}`}\r\n                      onClick={() => handleAttackerAnswer(true)}\r\n                      data-order={getOrderForPlayer('attacker', captureState.attackerAnswer === true)}\r\n                    >\r\n                      <img src=\"/images/attack-correct-icon.png\" alt=\"Атакующие верно\" />\r\n                    </CaptureButton>\r\n                    <CaptureButton\r\n                      className={`cancel ${captureState.attackerAnswer === false ? 'active' : ''}`}\r\n                      onClick={() => handleAttackerAnswer(false)}\r\n                      data-order={getOrderForPlayer('attacker', captureState.attackerAnswer === false)}\r\n                    >\r\n                      <img src=\"/images/attack-wrong-icon.png\" alt=\"Атакующие неверно\" />\r\n                    </CaptureButton>\r\n                  </CaptureModalColumn>\r\n                  <CaptureModalColumn>\r\n                    <CaptureButton\r\n                      className={`confirm-alt ${captureState.defenderAnswer === true ? 'active' : ''}`}\r\n                      onClick={() => handleDefenderAnswer(true)}\r\n                      data-order={getOrderForPlayer('defender', captureState.defenderAnswer === true)}\r\n                    >\r\n                      <img src=\"/images/defend-correct-icon.png\" alt=\"Защищающиеся верно\" />\r\n                    </CaptureButton>\r\n                    <CaptureButton\r\n                      className={`cancel-alt ${captureState.defenderAnswer === false ? 'active' : ''}`}\r\n                      onClick={() => handleDefenderAnswer(false)}\r\n                      data-order={getOrderForPlayer('defender', captureState.defenderAnswer === false)}\r\n                    >\r\n                      <img src=\"/images/defend-wrong-icon.png\" alt=\"Защищающиеся неверно\" />\r\n                    </CaptureButton>\r\n                  </CaptureModalColumn>\r\n                </>\r\n              )}\r\n            </CaptureModalActions>\r\n          </CaptureModalCard>\r\n        </CaptureModalBackdrop>\r\n      )}\r\n    </GameContainer>\r\n  );\r\n};\r\n\r\nexport default Game;"],"mappings":";;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,MAAM,MAAM,mBAAmB;AACtC,OAAOC,YAAY,MAAM,iBAAiB;AAC1C,OAAOC,GAAG,MAAM,OAAO;AACvB,SAASC,YAAY,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE9C,MAAMC,aAAa,GAAGR,MAAM,CAACS,GAAG;AAChC;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,EAAA,GANIF,aAAa;AAQnB,MAAMG,oBAAoB,GAAGX,MAAM,CAACS,GAAG;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GARID,oBAAoB;AAU1B,MAAME,gBAAgB,GAAGb,MAAM,CAACS,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACK,GAAA,GAXID,gBAAgB;AAatB,MAAME,4BAA4B,GAAGf,MAAM,CAACS,GAAG;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACO,GAAA,GAZID,4BAA4B;AAclC,MAAME,iBAAiB,GAAGjB,MAAM,CAACkB,EAAE;AACnC;AACA;AACA,CAAC;AAACC,GAAA,GAHIF,iBAAiB;AAKvB,MAAMG,gBAAgB,GAAGpB,MAAM,CAACqB,CAAC;AACjC;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAJIF,gBAAgB;AAMtB,MAAMG,mBAAmB,GAAGvB,MAAM,CAACS,GAAG;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACe,GAAA,GATID,mBAAmB;AAWzB,MAAME,aAAa,GAAGzB,MAAM,CAAC0B,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}